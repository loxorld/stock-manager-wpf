<Window x:Class="StockManager.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Stock Manager"
        Height="520" Width="900">

    <Grid Margin="14">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Barra superior -->
        <DockPanel Grid.Row="0" Margin="0,0,0,12" LastChildFill="True">
            <TextBlock Text="Stock"
                       FontSize="22"
                       FontWeight="SemiBold"
                       VerticalAlignment="Center"
                       DockPanel.Dock="Left"/>

            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">

                <Button Content="Modelos"
                    Width="110"
                    Margin="0,0,10,0"
                    Click="PhoneModels_Click"/>


                <Button Content="Nuevo SKU"
                    Width="110"
                    Margin="0,0,10,0"
                    Click="NewSku_Click"/>

                <Button Content="Editar SKU"
                    Width="110"
                    Margin="0,0,10,0"
                    Click="EditSku_Click"/>     


                <Button Content="Registrar movimiento"
                        Width="170"
                        Margin="0,0,10,0"
                        Click="RegisterMovement_Click"/>

                <Button Content="Ver historial"
                        Width="120"
                        Margin="0,0,10,0"
                        Click="ViewHistory_Click"/>


                <TextBox Width="320"
                         Margin="0,0,10,0"
                         VerticalContentAlignment="Center"
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>

                <Button Content="Buscar"
                        Width="90"
                        Command="{Binding SearchCommand}"/>
            </StackPanel>
        </DockPanel>

        <!-- Tabla -->
        <Grid Grid.Row="1">
            <DataGrid ItemsSource="{Binding Items}"
                      SelectedItem="{Binding SelectedItem}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      Margin="0,0,0,0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Nombre" Binding="{Binding Name}" Width="3*"/>
                    <DataGridTextColumn Header="Categoría" Binding="{Binding Category}" Width="1.3*"/>
                    <DataGridTextColumn Header="Modelo" Binding="{Binding PhoneModel}" Width="1.5*"/>
                    <DataGridTextColumn Header="Stock" Binding="{Binding Stock}" Width="0.8*"/>
                    <DataGridTextColumn Header="Precio" Binding="{Binding Price, StringFormat={}{0:C}}" Width="1*"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Loading overlay simple -->
            <Border Background="#80FFFFFF"
                    Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                <TextBlock Text="Cargando..."
                           FontSize="18"
                           FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
            </Border>
        </Grid>
    </Grid>
</Window>
